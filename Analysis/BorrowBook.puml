@startuml BorrowBook
' ================================================
' Robustness Diagram: Borrow Book
' Library Management System | Prof. Walt Melo
' Group: G25
' ================================================

skinparam defaultFontSize 12
skinparam defaultFontName Arial

' Actors
actor Member

' Boundary Objects (UI Elements)
boundary "Search\nInterface" as SearchUI
boundary "Book Details\nPage" as BookDetails
boundary "Checkout\nForm" as CheckoutForm
boundary "Transaction\nConfirmation" as ConfirmScreen

' Control Objects (Business Logic)
control "Search\nController" as SearchController
control "Borrow\nController" as BorrowController
control "Availability\nChecker" as AvailabilityChecker
control "Due Date\nCalculator" as DueDateCalc

' Entity Objects (Domain Model)
entity "Book" as Book
entity "Member" as MemberEntity
entity "Transaction" as Transaction
entity "Loan Record" as LoanRecord

' Interactions - Search Phase (included from Search Book)
Member -> SearchUI : Search for book
SearchUI -> SearchController : Submit search query
SearchController -> Book : Find book
SearchController -> BookDetails : Display book with availability

' Interactions - Borrowing Phase
Member -> BookDetails : Select "Borrow Book"
BookDetails -> BorrowController : Initiate borrow request

BorrowController -> AvailabilityChecker : Verify book availability
AvailabilityChecker -> Book : Check status
AvailabilityChecker -> MemberEntity : Verify member eligibility\n(no overdue books, borrow limit)

AvailabilityChecker -> BorrowController : Confirm eligibility

Member -> CheckoutForm : Confirm borrowing details
CheckoutForm -> BorrowController : Process checkout

BorrowController -> DueDateCalc : Calculate due date
BorrowController -> Transaction : Create transaction record
BorrowController -> LoanRecord : Create loan record
BorrowController -> Book : Update book status to "Borrowed"
BorrowController -> MemberEntity : Update member's borrowed books

BorrowController -> ConfirmScreen : Provide transaction details
ConfirmScreen -> Member : Display due date & receipt

@enduml
